<!DOCTYPE html>
<html lang="es" prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# fb: http://ogp.me/ns/fb#">
<head>
<meta charset="utf-8">
<meta content="Crearemos un contenedor LXC que permita la ejecución de la aplicación gráfica (GUI) de Enterprise Architect Viewer (EALite - EA Viewer) en Linux." name="description">
<meta content="width=device-width, initial-scale=1" name="viewport">
<title>Crear contenedor LXC para aplicación GUI - EALite | Cosmoscalibur</title>
<link crossorigin="anonymous" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" rel="stylesheet">
<link crossorigin="anonymous" href="https://cdnjs.cloudflare.com/ajax/libs/baguettebox.js/1.11.0/baguetteBox.min.css" integrity="sha256-cKiyvRKpm8RaTdU71Oq2RUVgvfWrdIXjvVdQF2oZ1Y4=" rel="stylesheet">
<link href="../../assets/css/all.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900" rel="stylesheet">
<meta content="#5670d4" name="theme-color">
<meta content="Nikola (getnikola.com)" name="generator">
<link href="../../en/rss.xml" rel="alternate" title="RSS (en)" type="application/rss+xml">
<link href="../../rss.xml" rel="alternate" title="RSS (es)" type="application/rss+xml">
<link href="https://cosmoscalibur.github.io/blog/crear-contenedor-lxc-para-aplicacion-gui-ealite/" rel="canonical">
<link href="../../images/favicon.jpg" rel="icon" sizes="32x32">
<meta content="595800477624602" property="fb:app_id"><!--[if lt IE 9]><script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]--><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-150354242-1">
</script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-150354242-1');
</script>
<script async>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '595800477624602',
      cookie     : true,
      xfbml      : true,
      version    : 'v7.0'
    });
    FB.AppEvents.logPageView();     
  };
  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "https://connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));
</script>
<meta content="Edward Villegas-Pulgarin" name="author">
<link href="../nos-atraemos-gravitacionalmente/" rel="prev" title="¿Nos atraemos gravitacionalmente?" type="text/html">
<link href="../crear-contenedor-docker-aplicacion-gui-ealite/" rel="next" title="Crear contenedor Docker aplicación GUI - EALite" type="text/html">
<meta content="Cosmoscalibur" property="og:site_name">
<meta content="Crear contenedor LXC para aplicación GUI - EALite" property="og:title">
<meta content="https://cosmoscalibur.github.io/blog/crear-contenedor-lxc-para-aplicacion-gui-ealite/" property="og:url">
<meta content="Crearemos un contenedor LXC que permita la ejecución de la aplicación gráfica (GUI) de Enterprise Architect Viewer (EALite - EA Viewer) en Linux." property="og:description">
<meta content="article" property="og:type">
<meta content="2019-11-11T18:21:26-05:00" property="article:published_time">
<meta content="contenedor" property="article:tag">
<meta content="ealite" property="article:tag">
<meta content="enterprise architect" property="article:tag">
<meta content="linux" property="article:tag">
<meta content="lxc" property="article:tag">
<meta content="lxd" property="article:tag">
<meta content="wine" property="article:tag">
<meta content="summary" name="twitter:card">
<meta content="cosmoscalibur" name="twitter:site">
<meta content="eyvillegasp" name="twitter:creator">
</head>
<body>
<a class="sr-only sr-only-focusable" href="#content">Ir al contenido principal</a> <!-- Header and menu bar -->
<div class="container">
<header class="blog-header py-3">
<div class="row nbb-header align-items-center">
<div class="col-md-3 col-xs-2 col-sm-2" style="width: auto;"><button aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler navbar-light bg-light nbb-navbar-toggler" data-target=".bs-nav-collapsible" data-toggle="collapse" type="button"><span class="navbar-toggler-icon"></span></button>
<div class="collapse bs-nav-collapsible bootblog4-search-form-holder"><!-- DuckDuckGo custom search -->
<form action="https://duckduckgo.com/" class="navbar-form pull-left" id="search" method="get" name="search"><input name="sites" type="hidden" value="https://www.cosmoscalibur.com/"><input name="k8" type="hidden" value="#444444"><input name="k9" type="hidden" value="#D51920"><input name="kt" type="hidden" value="h"><input class="span2" maxlength="255" name="q" placeholder="Search…" style="margin-top: 4px;" type="text"><input style="visibility: hidden;" type="submit" value="DuckDuckGo Search"></form>
<!-- End of custom search --></div>
</div>
<div class="col-md-6 col-xs-10 col-sm-10 bootblog4-brand" style="width: auto;"><a class="navbar-brand blog-header-logo text-dark" href="https://cosmoscalibur.github.io/"><span id="blog-title">Cosmoscalibur</span></a></div>
<div class="col-md-3 justify-content-end align-items-center bs-nav-collapsible collapse flex-collapse bootblog4-right-nav">
<nav class="navbar navbar-light bg-white">
<ul class="navbar-nav bootblog4-right-nav">
<li class="nav-item"><a class="nav-link" href="https://cosmoscalibur.github.io/en/" hreflang="en" rel="alternate">English</a></li>
</ul>
</nav>
</div>
</div>
</header>
<nav class="navbar navbar-expand-md navbar-light bg-white static-top">
<div class="collapse navbar-collapse bs-nav-collapsible" id="bs-navbar">
<ul class="navbar-nav nav-fill d-flex w-100">
<li class="nav-item"><a class="nav-link" href="../../archive.html">Archivo</a></li>
<li class="nav-item"><a class="nav-link" href="../../categories/">Etiquetas</a></li>
<li class="nav-item"><a class="nav-link" href="../../rss.xml">Canal RSS</a></li>
</ul>
</div>
<!-- /.navbar-collapse --></nav>
</div>
<div class="container" id="content" role="main">
<div class="body-content"><!--Body content-->
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title" itemprop="headline name"><a class="u-url" href=".">Crear contenedor LXC para aplicación GUI - EALite</a></h1>
<div class="metadata">
<p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">Edward Villegas-Pulgarin</span></p>
<p class="dateline"><a href="." rel="bookmark"><time class="published dt-published" datetime="2019-11-11T18:21:26-05:00" itemprop="datePublished" title="2019-11-11 18:21">2019-11-11 18:21</time> <span class="updated">(updated <time class="updated dt-updated" datetime="2019-11-13T22:02:00-05:00" itemprop="dateUpdated" title="2019-11-13 22:02">2019-11-13 22:02</time>)</span></a></p>
<p class="commentline"><span class="fb-comments-count" data-url="/blog/crear-contenedor-lxc-para-aplicacion-gui-ealite/"></span></p>
</div>
</header>
<div class="e-content entry-content" itemprop="articleBody text">
<div>
<p>El uso de contenedores en la industria del software se ha extendido ampliamente y no es de extrañar, ofrece a los desarrolladores la posibilidad de mejorar el aislamiento de sus servicios y de ahí hacerlo menos susceptible a errores por colisiones con otros servicios o conflictos de dependencias. Al mismo tiempo, son una alternativa más amigable en recursos respecto a las máquinas virtuales.</p>
<p>Múltiples proveedores de infraestructura para nube ofrecen la opción de desplegar los servicios a partir de un contenedor, y sin duda, facilita la distribución de entornos de desarrollo y aplicaciones.</p>
<!-- TEASER_END -->
<p>Con estos beneficios (algo similar a lo discutido en <a class="reference external" href="../instalando-paquetes-en-linux-mint/">Instalando paquetes en Linux (Mint)</a>), procederemos a crear un contenedor para la ejecución de Enterprise Architect (la versión del visor, pero es aplicable a la versión completa). De manera oficial hay instrucciones para su uso en Linux con Wine pero la receta está incompleta (hay que agregar una instrucción más) y es mejor no ensuciar nuestro sistema de 64 bits con bibliotecas de 32 bits de manera innecesaria. Así que empecemos.</p>
<div class="section" id="instalar-lxd">
<h2>Instalar LXD</h2>
<p>Nuestro primer paso será instalar el paquete LXD, el cual se encuentra disponible a través de múltiples gestores de paquetes de las distribuciones Linux pero también como paquete snap. Por facilidad, usaré el paquete snap.</p>
<pre class="code text"><a id="rest_code_0f0d39f9e4694a759fc1b20a58ab92c5-1" name="rest_code_0f0d39f9e4694a759fc1b20a58ab92c5-1"></a>sudo snap install lxd
</pre>
<p>Ahora, debemos inicializar (solo es necesario la primera vez tras instalar).</p>
<pre class="code text"><a id="rest_code_468138264980403bb454390bee7bed76-1" name="rest_code_468138264980403bb454390bee7bed76-1"></a>sudo lxd init
</pre>
<p>En mi caso, todos los valores que son preguntados los he dejado en su valor por defecto. Personalmente, solo debería preocuparnos el tamaño de la unidad usado (en caso de tener limitaciones en espacio de almacenamiento).</p>
</div>
<div class="section" id="crear-perfil-gui">
<h2>Crear perfil GUI</h2>
<p>Por defecto, el comportamiento de los contenedores es para la ejecución de servicios y aplicaciones de consola. Por eso, la ejecución de una aplicación gráfica nos requiere una configuración adicional, que es realizar el paso al sistema gráfico de nuestro sistema hospedador.</p>
<p>El perfil gráfico es definido con el siguiente código (copia y pega en un nuevo archivo, <code>lxdguiprofile.txt</code>).</p>
<pre class="code text"><a id="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-1" name="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-1"></a>config:
<a id="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-2" name="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-2"></a>  environment.DISPLAY: :0
<a id="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-3" name="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-3"></a>  raw.idmap: both 1000 1000
<a id="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-4" name="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-4"></a>  user.user-data: |
<a id="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-5" name="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-5"></a>    #cloud-config
<a id="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-6" name="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-6"></a>    runcmd:
<a id="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-7" name="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-7"></a>      - 'sed -i "s/; enable-shm = yes/enable-shm = no/g" /etc/pulse/client.conf'
<a id="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-8" name="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-8"></a>      - 'echo export PULSE_SERVER=unix:/tmp/.pulse-native | tee --append /home/ubuntu/.profile'
<a id="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-9" name="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-9"></a>    packages:
<a id="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-10" name="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-10"></a>      - x11-apps
<a id="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-11" name="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-11"></a>      - mesa-utils
<a id="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-12" name="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-12"></a>      - pulseaudio
<a id="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-13" name="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-13"></a>description: GUI LXD profile
<a id="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-14" name="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-14"></a>devices:
<a id="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-15" name="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-15"></a>  PASocket:
<a id="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-16" name="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-16"></a>    path: /tmp/.pulse-native
<a id="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-17" name="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-17"></a>    source: /run/user/1000/pulse/native
<a id="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-18" name="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-18"></a>    type: disk
<a id="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-19" name="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-19"></a>  X0:
<a id="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-20" name="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-20"></a>    path: /tmp/.X11-unix/X0
<a id="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-21" name="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-21"></a>    source: /tmp/.X11-unix/X0
<a id="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-22" name="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-22"></a>    type: disk
<a id="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-23" name="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-23"></a>  mygpu:
<a id="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-24" name="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-24"></a>    type: gpu
<a id="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-25" name="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-25"></a>name: gui
<a id="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-26" name="rest_code_bb701a30a3cd40dfa8d2966f19a961d7-26"></a>used_by:
</pre>
<p>Ahora, crearemos el perfil:</p>
<pre class="code text"><a id="rest_code_9c1b60ce365f42978c80fc02b86cf857-1" name="rest_code_9c1b60ce365f42978c80fc02b86cf857-1"></a>sudo lxc profile create gui
<a id="rest_code_9c1b60ce365f42978c80fc02b86cf857-2" name="rest_code_9c1b60ce365f42978c80fc02b86cf857-2"></a>cat lxdguiprofile.txt | sudo lxc profile edit gui
</pre>
<p>Este procedimiento, solo es necesario hacerlo la primera vez.</p>
</div>
<div class="section" id="obtener-contenedor-base">
<h2>Obtener contenedor base</h2>
<p>Una vez creado el perfil, lanzaremos un contenedor usando una imagen base, es decir, sobre la cual desarrollaremos nuestra necesidad. Estas imágenes base se encuentran disponibles en la página del proyecto y son bases de múltiples distribuciones Linux, con versiones y arquitecturas diferentes.</p>
<p>Para nuestro fin, usaremos una base de Ubuntu 18.04 para arquitectura i386, que corresponde a 32 bits. Puedes usar otra distribución siempre y cuando disponga de la forma de instalar los paquetes necesarios y en versiones recientes (entre más reciente sea Wine, mejor).</p>
<pre class="code text"><a id="rest_code_40769f5f8c044b4ca359b161500729ab-1" name="rest_code_40769f5f8c044b4ca359b161500729ab-1"></a>sudo lxc launch --profile default --profile gui images:ubuntu/18.04/i386 ea
</pre>
<p>Cuando no requerimos la parte gráfica, podemos omitir <code>--profile default --profile gui</code>. Los dos perfiles son un proceso de herencia, primero se carga el perfil por defecto y luego se añade lo necesario para las aplicaciones gráficas.</p>
<p>Este procedimiento es la primera vez de cada contenedor. Si por error omitimos el perfil gráfico, tendremos que volverlo a crear. Si por un error en la especificación del contenedor lo deseamos eliminar, podemos ejecutar <code>sudo lxc rm ea --force</code>. El forzado es necesario para detener la ejecución del contenedor, o igual podríamos detenerlo primero, <code>sudo lxc stop ea</code>.</p>
</div>
<div class="section" id="comandos-en-el-contenedor">
<h2>Comandos en el contenedor</h2>
<p>Para instalar nuestro programa en el contenedor, necesitamos ejecutar comandos en este. Para ello, tenemos <code>lxc exec {contenedor} -- {comando}</code>. Una forma interactiva, adecuada para pruebas, es ejecutar bash.</p>
<pre class="code text"><a id="rest_code_84af22cdaf55462db32f074f3161869a-1" name="rest_code_84af22cdaf55462db32f074f3161869a-1"></a>sudo lxc exec ea -- /bin/bash
</pre>
<p>De esta manera podemos ejecutar los comandos de la misma manera que lo hacemos en nuestro sistema, ya que estamos en el contenedor.</p>
<p>Si deseamos automatizar, nos interesará enviar directamente las instrucciones en lugar de bash. Ejemplo, <code>sudo lxc exec ea -- apt update -q</code>. Notemos que se ha usado un comando que requiere privilegios de administrador, y es porque por defecto el ingreso al contenedor es como administrador. Para hacer uso del usuario estándar debemos indicarlo de forma explícita (por defecto, tenemos el usuario ubuntu), <code>sudo lxc exec ea -- su - ubuntu -c 'echo $(uname -a)'</code>.</p>
</div>
<div class="section" id="gestionar-archivos">
<h2>Gestionar archivos</h2>
<p>La gestión de archivos es realizada con los comandos <code>file pull</code> y <code>file push</code>.</p>
<p>Así, si deseamos enviar un archivo:</p>
<pre class="code text"><a id="rest_code_495ffd801bd14e6897c5ee172ab229cb-1" name="rest_code_495ffd801bd14e6897c5ee172ab229cb-1"></a>sudo lxc file push {archivo local} {contenedor}/{ruta contenedor}
</pre>
<p>Y si deseamos traer un archivo del contenedor:</p>
<pre class="code text"><a id="rest_code_2ea4989d70614fb89bdf680cf49d72ff-1" name="rest_code_2ea4989d70614fb89bdf680cf49d72ff-1"></a>sudo lxc file pull {contenedor}/{ruta contenedor} {archivo local}
</pre></div>
<div class="section" id="instalar-ealite">
<h2>Instalar EALite</h2>
<p>Ahora que sabemos ejecutar comandos en el contenedor, instalaremos las dependencias y finalmente EALite.</p>
<pre class="code text"><a id="rest_code_adc753776eb945f782cb4edb774d6b25-1" name="rest_code_adc753776eb945f782cb4edb774d6b25-1"></a>sudo lxc exec ea -- apt update -q
<a id="rest_code_adc753776eb945f782cb4edb774d6b25-2" name="rest_code_adc753776eb945f782cb4edb774d6b25-2"></a>sudo lxc exec ea -- apt install --install-recommends -y wine-stable winetricks
<a id="rest_code_adc753776eb945f782cb4edb774d6b25-3" name="rest_code_adc753776eb945f782cb4edb774d6b25-3"></a>sudo lxc exec ea -- apt install -y fonts-crosextra-carlito
<a id="rest_code_adc753776eb945f782cb4edb774d6b25-4" name="rest_code_adc753776eb945f782cb4edb774d6b25-4"></a>sudo lxc exec ea -- su - ubuntu -c 'winetricks --unattended msxml3'
<a id="rest_code_adc753776eb945f782cb4edb774d6b25-5" name="rest_code_adc753776eb945f782cb4edb774d6b25-5"></a>sudo lxc exec ea -- su - ubuntu -c 'winetricks --unattended msxml4'
<a id="rest_code_adc753776eb945f782cb4edb774d6b25-6" name="rest_code_adc753776eb945f782cb4edb774d6b25-6"></a>sudo lxc exec ea -- su - ubuntu -c 'winetricks --unattended msxml6'
<a id="rest_code_adc753776eb945f782cb4edb774d6b25-7" name="rest_code_adc753776eb945f782cb4edb774d6b25-7"></a>sudo lxc exec ea -- su - ubuntu -c 'winetricks --unattended mdac28'
<a id="rest_code_adc753776eb945f782cb4edb774d6b25-8" name="rest_code_adc753776eb945f782cb4edb774d6b25-8"></a>sudo lxc exec ea -- su - ubuntu -c 'winetricks --unattended jet40'
<a id="rest_code_adc753776eb945f782cb4edb774d6b25-9" name="rest_code_adc753776eb945f782cb4edb774d6b25-9"></a>wget http://www.sparxsystems.com.au/bin/EALite.exe
<a id="rest_code_adc753776eb945f782cb4edb774d6b25-10" name="rest_code_adc753776eb945f782cb4edb774d6b25-10"></a>sudo lxc file push EALite.exe ea/home/ubuntu/EALite.exe
<a id="rest_code_adc753776eb945f782cb4edb774d6b25-11" name="rest_code_adc753776eb945f782cb4edb774d6b25-11"></a>sudo lxc exec ea -- su - ubuntu -c 'wine msiexec /i EALite.exe'
</pre>
<p>En este punto, procederemos de manera gráfica a la instalación final de EALite.</p>
<div class="figure align-center"><a class="reference external image-reference" href="../../images/crear-contenedor-lxc-para-aplicacion-gui-ealite/instalacion-grafica-ealite-lxc.png"><img alt="Ventana de instalación gráfica de EALite." src="../../images/crear-contenedor-lxc-para-aplicacion-gui-ealite/instalacion-grafica-ealite-lxc.thumbnail.png" style="width: 480px;"></a>
<p class="caption">Ventana de instalación gráfica de EALite.</p>
</div>
<p>Ahora, es necesario crear un mecanismo simple para la ejecución de EA.</p>
<pre class="code text"><a id="rest_code_632027016794493e8d08f9834ca97400-1" name="rest_code_632027016794493e8d08f9834ca97400-1"></a>sudo lxc exec ea -- su - ubuntu -c 'mkdir $HOME/.local/bin'
<a id="rest_code_632027016794493e8d08f9834ca97400-2" name="rest_code_632027016794493e8d08f9834ca97400-2"></a>sudo lxc exec ea -- su - ubuntu -c 'echo "wine $HOME/.wine/drive_c/Program\ Files/Sparx\ Systems/EA\ LITE/EA.exe" &gt; $HOME/.local/bin/ealite'
<a id="rest_code_632027016794493e8d08f9834ca97400-3" name="rest_code_632027016794493e8d08f9834ca97400-3"></a>sudo lxc exec ea -- su - ubuntu -c 'chmod 755 $HOME/.local/bin/ealite'
</pre></div>
<div class="section" id="ejecutar-ealite">
<h2>Ejecutar EALite</h2>
<p>Ahora, podemos usar el visor de Enterprise Architect.</p>
<pre class="code text"><a id="rest_code_9cc67a3d54c34b0a923752ed892f60ab-1" name="rest_code_9cc67a3d54c34b0a923752ed892f60ab-1"></a>sudo lxc exec ea -- su - ubuntu -c 'ealite'
</pre>
<p>Cuando iniciemos el sistema operativo, requerimos de iniciar el contenedores antes de ejecutar la instrucción anterior, <code>sudo lxc start ea</code>.</p>
<div class="figure align-center"><a class="reference external image-reference" href="../../images/crear-contenedor-lxc-para-aplicacion-gui-ealite/ealite-inicio-lxc.png"><img alt="EA Viewer abierto." src="../../images/crear-contenedor-lxc-para-aplicacion-gui-ealite/ealite-inicio-lxc.thumbnail.png" style="width: 480px;"></a>
<p class="caption">EA Viewer abierto.</p>
</div>
<div class="figure align-center"><img alt="Acceso al sistema de archivos del contenedor y no solo de la unidad de Wine." src="../../images/crear-contenedor-lxc-para-aplicacion-gui-ealite/ealite-abrir-proyecto-lxc.png" style="width: 480px;">
<p class="caption">Acceso al sistema de archivos del contenedor y no solo de la unidad de Wine.</p>
</div>
<p>Puedes asegurar una forma simple de ejecutar EALite creando una rutina de lanzamiento con las dos líneas anteriores en un archivo que sea reconocido en el <code>path</code>.</p>
<pre class="code text"><a id="rest_code_27629668e0eb414c9ae243ac00a955f0-1" name="rest_code_27629668e0eb414c9ae243ac00a955f0-1"></a>mkdir -p $HOME/.local/bin
<a id="rest_code_27629668e0eb414c9ae243ac00a955f0-2" name="rest_code_27629668e0eb414c9ae243ac00a955f0-2"></a>cat &lt;&lt; EOF &gt; $HOME/.local/bin/ealite
<a id="rest_code_27629668e0eb414c9ae243ac00a955f0-3" name="rest_code_27629668e0eb414c9ae243ac00a955f0-3"></a>sudo lxc start ea
<a id="rest_code_27629668e0eb414c9ae243ac00a955f0-4" name="rest_code_27629668e0eb414c9ae243ac00a955f0-4"></a>sudo lxc exec ea -- su - ubuntu -c 'ealite'
<a id="rest_code_27629668e0eb414c9ae243ac00a955f0-5" name="rest_code_27629668e0eb414c9ae243ac00a955f0-5"></a>EOF
<a id="rest_code_27629668e0eb414c9ae243ac00a955f0-6" name="rest_code_27629668e0eb414c9ae243ac00a955f0-6"></a>chmod 755 $HOME/.local/bin/ealite
</pre>
<p>La ejecución con <code>sudo</code> puede omitirse si se añade el usuario a un grupo que permita la ejecución de lxc. Más adelante, haré una publicación sobre como hacerlo. Por ahora, diviértete ejecutando <code>ealite</code> e ingresando la contraseña de administrador.</p>
<p>Para abrir un proyecto, recuerda usar <code>file push</code> y explorar dentro del contenedor.</p>
</div>
<div class="section" id="compartir">
<h2>Compartir</h2>
<p>Para compartir el contenedor, puedes publicarlo y exportar la imagen.</p>
<pre class="code text"><a id="rest_code_ed3626c451974e3294e3ca9525063641-1" name="rest_code_ed3626c451974e3294e3ca9525063641-1"></a>sudo lxc publish ea --alias ealite
<a id="rest_code_ed3626c451974e3294e3ca9525063641-2" name="rest_code_ed3626c451974e3294e3ca9525063641-2"></a>sudo lxc image export ealite
</pre>
<p>La imagen exportada es un archivo <code>tar.gz</code> con el nombre asociado al <em>fingerprint</em> (una secuencia alfanumérica). Luego se debe importar la imagen y hacer <code>launch</code> nuevamente con el perfil.</p>
<p>También puedes exportar directamente el contenedor, lo cual es recomendable porque lleva con ello la configuración del perfil GUI y es listo para usar una vez hagas la importación.</p>
<pre class="code text"><a id="rest_code_cc21caf2c9f14b6e920ba1f4645d5989-1" name="rest_code_cc21caf2c9f14b6e920ba1f4645d5989-1"></a>sudo lxc export ea ea.tar.gz --optimized-storage
</pre></div>
<div class="section" id="referencias">
<h2>Referencias</h2>
<ul class="simple">
<li>
<p><a class="reference external" href="https://www.sparxsystems.eu/enterprisearchitect/ea-lite-edition/">EA Viewer</a>.</p>
</li>
<li>
<p><a class="reference external" href="https://askubuntu.com/questions/827070/cant-run-glxgears-in-root-on-lxc-2-0-container/827146">can't run “glxgears” in root on lxc 2.0 container</a>. Solución a un posible error usando GUI en LXC.</p>
</li>
<li>
<p><a class="reference external" href="https://blog.simos.info/how-to-easily-run-graphics-accelerated-gui-apps-in-lxd-containers-on-your-ubuntu-desktop/">How to easily run graphics-accelerated GUI apps in LXD containers on your Ubuntu desktop</a>.</p>
</li>
<li>
<p><a class="reference external" href="https://linuxcontainers.org/lxd/getting-started-cli/">LXD Getting started - command line</a>.</p>
</li>
<li>
<p><a class="reference external" href="https://us.images.linuxcontainers.org/">Image server for LXC and LXD</a>.</p>
</li>
<li>
<p><a class="reference external" href="https://www.sparxsystems.com/enterprise_architect_user_guide/14.0/product_information/enterprise_architect_linux.html">Installing Enterprise Architect under Linux</a></p>
</li>
<li>
<p><a class="reference external" href="https://wiki.winehq.org/Winetricks">Winetricks</a>.</p>
</li>
<li>
<p><a class="reference external" href="https://stackoverflow.com/questions/31228191/how-do-i-export-a-lxc-container">How do I export a lxc container?</a></p>
</li>
</ul>
</div>
</div>
</div>
<aside class="postpromonav">
<nav>
<ul class="tags" itemprop="keywords">
<li><a class="tag p-category" href="../../categories/contenedor/" rel="tag">contenedor</a></li>
<li><a class="tag p-category" href="../../categories/ealite/" rel="tag">ealite</a></li>
<li><a class="tag p-category" href="../../categories/enterprise-architect/" rel="tag">enterprise architect</a></li>
<li><a class="tag p-category" href="../../categories/linux/" rel="tag">linux</a></li>
<li><a class="tag p-category" href="../../categories/lxc/" rel="tag">lxc</a></li>
<li><a class="tag p-category" href="../../categories/lxd/" rel="tag">lxd</a></li>
<li><a class="tag p-category" href="../../categories/wine/" rel="tag">wine</a></li>
</ul>
<ul class="pager hidden-print">
<li class="previous"><a href="../nos-atraemos-gravitacionalmente/" rel="prev" title="¿Nos atraemos gravitacionalmente?">Publicación anterior</a></li>
<li class="next"><a href="../crear-contenedor-docker-aplicacion-gui-ealite/" rel="next" title="Crear contenedor Docker aplicación GUI - EALite">Siguiente publicación</a></li>
</ul>
</nav>
</aside>
<section class="comments hidden-print">
<h2>Comentarios</h2>
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    // init the FB JS SDK
    FB.init({
      appId      : '595800477624602',
      status     : true,
      xfbml      : true
    });

  };

  // Load the SDK asynchronously
  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "https://connect.facebook.net/en_US/all.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));
</script>
<div class="fb-comments" data-href="https://cosmoscalibur.github.io/blog/crear-contenedor-lxc-para-aplicacion-gui-ealite/" data-width="470"></div>
</section>
</article>
<div id="fb-root"></div>
<script>
    // thank lxml for this
    $('.fb-comments-count').each(function(i, obj) {
        var url = obj.attributes['data-url'].value;
        // change here if you dislike the default way of displaying
        // this
        obj.innerHTML = '<fb:comments-count href="' + url + '"><\/fb:comments-count> comments';
    });

  window.fbAsyncInit = function() {
    // init the FB JS SDK
    FB.init({
      appId      : '595800477624602',
      status     : true,
      xfbml      : true
    });

  };

  // Load the SDK asynchronously
  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "https://connect.facebook.net/en_US/all.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));
</script><!--End of body content-->
<footer id="footer">
<div align="center"><iframe frameborder="0" marginheight="0" marginwidth="0" scrolling="no" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&amp;OneJS=1&amp;Operation=GetAdHtml&amp;MarketPlace=US&amp;source=ss&amp;ref=as_ss_li_til&amp;ad_type=product_link&amp;tracking_id=cosmoscalibur-20&amp;language=es_US&amp;marketplace=amazon&amp;region=US&amp;placement=B007700BJG&amp;asins=B007700BJG&amp;linkId=e254123f0500fc338aaa7fc094ad49eb&amp;show_border=true&amp;link_opens_in_new_window=true" style="width:120px;height:240px;"></iframe></div>
<br>
Contents © 2020 <a href="mailto:cosmoscalibur@gmail.com">Edward Villegas Pulgarin</a> - Powered by <a href="https://getnikola.com" rel="nofollow">Nikola</a> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="license"><img alt="Creative Commons License BY-NC-SA" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" style="border-width:0; margin-bottom:12px;"></a></footer>
</div>
</div>
<script crossorigin="anonymous" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" src="https://code.jquery.com/jquery-3.4.1.min.js">
</script>
<script crossorigin="anonymous" integrity="sha256-/ijcOLwFf26xEYAjW75FizKVo5tnTYiQddPZoLUHHZ8=" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.1/umd/popper.min.js">
</script>
<script crossorigin="anonymous" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js">
</script>
<script crossorigin="anonymous" integrity="sha256-yQGjQhFs3LtyiN5hhr3k9s9TWZOh/RzCkD3gwwCKlkg=" src="https://cdnjs.cloudflare.com/ajax/libs/baguettebox.js/1.11.0/baguetteBox.min.js">
</script>
<script src="../../assets/js/all.js">
</script>
<script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
</script>
</body>
</html>
